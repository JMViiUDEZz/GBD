CREATE TABLE SP_PROVEEDORES(
CIF VARCHAR2(10) PRIMARY KEY,
NOMBRE VARCHAR2(40) NOT NULL,
DIRECCION VARCHAR2(50) NOT NULL,
TELEFONO VARCHAR2(12),
PERSONA_CONTACTO VARCHAR2(35)
)
CREATE TABLE SP_ARTICULOS(
REF DECIMAL(3,0) PRIMARY KEY,
NOMBRE VARCHAR2(25) NOT NULL,
FAMILIA DECIMAL(2,0) NOT NULL,
STOCK DECIMAL(4,0) NOT NULL,
PRECIO DECIMAL(6,2) NOT NULL,
OBSERVACIONES VARCHAR2(255)
)
CREATE TABLE SP_FAMILIAS(
REF DECIMAL(2) PRIMARY KEY,
DESCRIPCION VARCHAR2(30) NOT NULL
)
CREATE TABLE SP_PEDIDOS(
REF DECIMAL(6) PRIMARY KEY,
FECHA DATE NOT NULL,
CIF_PROVEEDOR VARCHAR2(10) NOT NULL,
ESTADO VARCHAR2(25) NOT NULL
)
CREATE TABLE SP_DETALLES_PEDIDOS(
REF_PEDIDO NUMBER(6,0),
LINEA NUMBER(2),
REF_ARTICULO DECIMAL(3,0) NOT NULL,
UNIDADES DECIMAL(6) NOT NULL,
PRIMARY KEY (REF_PEDIDO,LINEA)
)
ALTER TABLE SP_ARTICULOS
ADD FOREIGN KEY (FAMILIA) REFERENCES SP_FAMILIAS(REF)
ON DELETE CASCADE;
ALTER TABLE SP_DETALLES_PEDIDOS
ADD CONSTRAINT FK_PEDIDOS FOREIGN KEY (REF_PEDIDO)
REFERENCES SP_PEDIDOS(REF) ON DELETE CASCADE;
ALTER TABLE SP_DETALLES_PEDIDOS
ADD CONSTRAINT FK_ARTICULOS FOREIGN KEY (REF_ARTICULO)
REFERENCES SP_ARTICULOS(REF) ON DELETE CASCADE;
ALTER TABLE SP_PEDIDOS
ADD CONSTRAINT FK_PROVEEDOR FOREIGN KEY (CIF_PROVEEDOR)
REFERENCES SP_PROVEEDORES(CIF) ON DELETE CASCADE;
ALTER TABLE SP_PROVEEDORES
MODIFY DIRECCION VARCHAR2(60);
ALTER TABLE SP_ARTICULOS
ADD FECHA_ALTA DATE NOT NULL;
ALTER TABLE SP_ARTICULOS
ADD CONSTRAINT CHK_STOCK CHECK (STOCK>=0);
ALTER TABLE SP_PROVEEDORES ADD REF_INTERNA VARCHAR2(20) UNIQUE;
ALTER TABLE SP_FAMILIAS RENAME COLUMN DESCRIPCION TO NOMBRE;
ALTER TABLE SP_ARTICULOS DROP COLUMN OBSERVACIONES;

